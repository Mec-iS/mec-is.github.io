<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Functional Concepts For Python | PYhummus</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://example.com/posts/functional-concepts-for-python/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="lorenzogotuned">
<meta property="og:site_name" content="PYhummus">
<meta property="og:title" content="Functional Concepts For Python">
<meta property="og:url" content="https://example.com/posts/functional-concepts-for-python/">
<meta property="og:description" content="FUNCTIONAL CONCEPTS FOR PYTHON¶Taken from:
 Functional Programming in Python by David Mertz - O'Reilly (Free book)









ENCAPSULATION¶





In [ ]:

    
# configure the data to start with 
collec">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-07-20T22:31:23+02:00">
<meta property="article:tag" content="Decorators">
<meta property="article:tag" content="Functional">
<meta property="article:tag" content="Python">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../stories/about/index.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/lorenzogotuned" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/Mec-iS" title="My Github"><i class="icon-github"></i></a></li>

        <li>        <footer id="footer" role="contentinfo"><p>2015 Content collected and organized by         <a href="mailto:tunedconsulting@gmail.com">lorenzogotuned</a>   Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>      This material has been collected for learning purposes only and no commercial use. All rights reserved to sources.</p>
            
        </footer>
</li>
        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Functional Concepts For Python</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2015-07-20T22:31:23+02:00">2015-07-20 22:31</time>
            
                      |  
        <a href="index.ipynb" id="sourcelink">Source</a>

            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/decorators/" rel="tag">Decorators</a></li>
           <li><a class="tag p-category" href="../../categories/functional/" rel="tag">Functional</a></li>
           <li><a class="tag p-category" href="../../categories/python/" rel="tag">Python</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="FUNCTIONAL-CONCEPTS-FOR-PYTHON">FUNCTIONAL CONCEPTS FOR PYTHON<a class="anchor-link" href=".#FUNCTIONAL-CONCEPTS-FOR-PYTHON">¶</a>
</h2>
<p>Taken from:
 Functional Programming in Python by David Mertz - O'Reilly (Free book)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="ENCAPSULATION">ENCAPSULATION<a class="anchor-link" href=".#ENCAPSULATION">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># configure the data to start with </span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">get_initial_state</span><span class="p">()</span> 
<span class="n">state_var</span> <span class="o">=</span> <span class="k">None</span> 
<span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data_set</span><span class="p">:</span>    
    <span class="k">if</span> <span class="n">condition</span><span class="p">(</span><span class="n">state_var</span><span class="p">):</span>        
        <span class="n">state_var</span> <span class="o">=</span> <span class="n">calculate_from</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>        
        <span class="n">new</span> <span class="o">=</span> <span class="n">modify</span><span class="p">(</span><span class="n">datum</span><span class="p">,</span> <span class="n">state_var</span><span class="p">)</span>        
        <span class="n">collection</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>    
    <span class="k">else</span><span class="p">:</span>        
        <span class="n">new</span> <span class="o">=</span> <span class="n">modify_differently</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>
<span class="c"># Now actually work with the data </span>
<span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">collection</span><span class="p">:</span>    
    <span class="n">process</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span> 
    
<span class="c">#We might simply remove the “how” of the data construction from the current scope, </span>
<span class="c">#and tuck it away in a function that we can think about in isolation </span>
<span class="c">#(or not think about at all once it is sufficiently abstracted). </span>
<span class="c">#For example:</span>
<span class="c"># tuck away construction of data</span>
<span class="k">def</span> <span class="nf">make_collection</span><span class="p">(</span><span class="n">data_set</span><span class="p">):</span>    
    <span class="n">collection</span> <span class="o">=</span> <span class="n">get_initial_state</span><span class="p">()</span>    
    <span class="n">state_var</span> <span class="o">=</span> <span class="k">None</span>    
    <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data_set</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">condition</span><span class="p">(</span><span class="n">state_var</span><span class="p">):</span>
            <span class="n">state_var</span> <span class="o">=</span> <span class="n">calculate_from</span><span class="p">(</span><span class="n">datum</span><span class="p">,</span> <span class="n">state_var</span><span class="p">)</span>
            <span class="n">new</span> <span class="o">=</span> <span class="n">modify</span><span class="p">(</span><span class="n">datum</span><span class="p">,</span> <span class="n">state_var</span><span class="p">)</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>            
            <span class="n">new</span> <span class="o">=</span> <span class="n">modify_differently</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>    
    <span class="k">return</span> <span class="n">collection</span> 

<span class="c"># Now actually work with the data </span>
<span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">make_collection</span><span class="p">(</span><span class="n">data_set</span><span class="p">):</span>    
    <span class="n">process</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="COMPREHENSIONS">COMPREHENSIONS<a class="anchor-link" href=".#COMPREHENSIONS">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c">#if our original code was:</span>
<span class="n">collection</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span> 
<span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data_set</span><span class="p">:</span>    
    <span class="k">if</span> <span class="n">condition</span><span class="p">(</span><span class="n">datum</span><span class="p">):</span>        
        <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>    
    <span class="k">else</span><span class="p">:</span>        
        <span class="n">new</span> <span class="o">=</span> <span class="n">modify</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>        
        <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new</span><span class="p">)</span> 
        
<span class="c">#Somewhat more compactly we could write this as:</span>
<span class="n">collection</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">if</span> <span class="n">condition</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">else</span> <span class="n">modify</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data_set</span><span class="p">]</span> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="GENERATORS">GENERATORS<a class="anchor-link" href=".#GENERATORS">¶</a>
</h4>
<p>"they are also lazy. That is to say that they are merely a description of “how to get the data” that is not realized until one explicitly asks for it, either by calling <code>.next()</code>"</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">log_lines</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">read_line</span><span class="p">(</span><span class="n">huge_log_file</span><span class="p">)</span> <span class="k">if</span> <span class="n">complex_condition</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>

<span class="c"># Obviously, this generator comprehension also has imperative versions, for example:</span>
<span class="k">def</span> <span class="nf">get_log_lines</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">read_line</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>    
    <span class="k">while</span> <span class="k">True</span><span class="p">:</span>         <span class="c">#  the behind-the-scenes “how” of a while loop over an iteratable (generator above)</span>
        <span class="k">try</span><span class="p">:</span>            
            <span class="k">if</span> <span class="n">complex_condition</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>                
                <span class="k">yield</span> <span class="n">line</span>   
            <span class="n">line</span> <span class="o">=</span> <span class="n">read_line</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>        
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>            
            <span class="k">raise</span>
            
<span class="n">log_lines</span> <span class="o">=</span> <span class="n">get_log_lines</span><span class="p">(</span><span class="n">huge_log_file</span><span class="p">)</span> 

<span class="c"># We could do this with a class that had .__next__() and .__iter__() methods. For example:</span>
<span class="k">class</span> <span class="nc">GetLogLines</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log_file</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">log_file</span> <span class="o">=</span> <span class="n">log_file</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="k">None</span>    
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">return</span> <span class="bp">self</span>    
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="ow">is</span> <span class="k">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">read_line</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">complex_condition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">read_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span>
        
<span class="n">log_lines</span> <span class="o">=</span> <span class="n">GetLogLines</span><span class="p">(</span><span class="n">huge_log_file</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="DICTS-AND-SETS">DICTS AND SETS<a class="anchor-link" href=".#DICTS-AND-SETS">¶</a>
</h4>
<p>"dictionaries and sets can be created “all at once” rather than by repeatedly calling <code>.update()</code> or <code>.add()</code> in a loop. For example:"</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="p">{</span><span class="n">i</span><span class="p">:</span><span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="o">+</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="p">{</span><span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="o">+</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="RECURSION">RECURSION<a class="anchor-link" href=".#RECURSION">¶</a>
</h4>
<p>"Python lacks an internal feature called tail call elimination that makes deep recursion computationally efficient in some languages. Let us find a trivial example where recursion is really just a kind of iteration:"</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">running_sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>    
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>        
        <span class="nb">print</span><span class="p">()</span>        
        <span class="k">return</span>    
    <span class="n">total</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">start</span>    
    <span class="nb">print</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>    
    <span class="n">running_sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">total</span><span class="p">)</span>

<span class="n">running_sum</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># A slightly less trivial example, factorial in recursive and iterative style:</span>
<span class="k">def</span> <span class="nf">factorialR</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>    
    <span class="s">"Recursive factorial function"</span>    
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="mi">1</span>    
    <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">N</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">N</span> <span class="o">*</span> <span class="n">factorialR</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">factorialR</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">factorialI</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>    
    <span class="s">"Iterative factorial function"</span>    
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="mi">1</span>    
    <span class="n">product</span> <span class="o">=</span> <span class="mi">1</span>    
    <span class="k">while</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>        
        <span class="n">product</span> <span class="o">*=</span> <span class="n">N</span>        
        <span class="n">N</span> <span class="o">-=</span> <span class="mi">1</span>    
    <span class="k">return</span> <span class="n">product</span>

<span class="nb">print</span><span class="p">(</span><span class="n">factorialI</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="c"># It is not a good idea in Python—most of the time—to use recursion merely for “iteration by other means.”</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="ALTERNATIVES-TO-FOR-LOOPs-(when-it-is-a-good-idea)">ALTERNATIVES TO FOR LOOPs (when it is a good idea)<a class="anchor-link" href=".#ALTERNATIVES-TO-FOR-LOOPs-(when-it-is-a-good-idea)">¶</a>
</h3>
<h4 id="using-map()">using map()<a class="anchor-link" href=".#using-map()">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># If we simply call a function inside a for loop, the built-in higherorder function map() comes to our aid:</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>    <span class="c"># statement-based loop    </span>
    <span class="n">func</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> 
    
<span class="c"># The following code is entirely equivalent to the functional version, except there is no repeated rebinding of the variable e involved, and hence no state:</span>
<span class="nb">map</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>   <span class="c"># map()-based "loop"</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c">## A similar technique is available for a functional approach to sequential program flow:</span>
<span class="c"># let f1, f2, f3 (etc) be functions that perform actions </span>
<span class="c"># an execution utility function </span>
<span class="n">do_it</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="c"># map()-based action sequence </span>
<span class="nb">map</span><span class="p">(</span><span class="n">do_it</span><span class="p">,</span> <span class="p">[</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">])</span> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># We can combine the sequencing of function calls with passing arguments from iterables:</span>
<span class="n">hello</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span> 
<span class="n">bye</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s">"Bye"</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span> 
<span class="n">_</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">do_it</span><span class="p">,</span> <span class="p">[</span><span class="n">hello</span><span class="p">,</span> <span class="n">bye</span><span class="p">],</span> <span class="p">[</span><span class="s">'David'</span><span class="p">,</span><span class="s">'Jane'</span><span class="p">],</span> <span class="p">[</span><span class="s">'Mertz'</span><span class="p">,</span><span class="s">'Doe'</span><span class="p">]))</span> 

<span class="n">do_all_funcs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">fns</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">))</span> <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">fns</span><span class="p">]</span> 
<span class="n">_</span> <span class="o">=</span> <span class="n">do_all_funcs</span><span class="p">([</span><span class="n">hello</span><span class="p">,</span> <span class="n">bye</span><span class="p">],</span> <span class="p">[</span><span class="s">'David'</span><span class="p">,</span><span class="s">'Jane'</span><span class="p">],</span> <span class="p">[</span><span class="s">'Mertz'</span><span class="p">,</span><span class="s">'Doe'</span><span class="p">])</span> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="CALLABLES">CALLABLES<a class="anchor-link" href=".#CALLABLES">¶</a>
</h4>
<p>"Python actually gives us several different ways to create functions, or at least something very function-like (i.e., that can be called). They are:</p>
<ol>
<li>Regular functions created with <code>def</code> and given a name at definition time </li>
<li>Anonymous functions created with <code>lambda</code> </li>
<li>Instances of classes that define a <code>__call()__</code> method </li>
<li>Closures returned by function factories </li>
<li>Static methods of instances, either via the @staticmethod decorator or via the class <code>__dict__</code> </li>
<li>Generator functions" </li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Lambdas-and-named-functions">Lambdas and named functions<a class="anchor-link" href=".#Lambdas-and-named-functions">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">hello1</span><span class="p">(</span><span class="n">name</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> 
    
<span class="n">hello2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> 

<span class="n">hello1</span><span class="p">(</span><span class="s">'David'</span><span class="p">)</span>
<span class="n">hello2</span><span class="p">(</span><span class="s">'David'</span><span class="p">)</span>
<span class="c"># The only real difference is in .__qualname__ attribute</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="CLOSURES-and-CLASSES">CLOSURES and CLASSES<a class="anchor-link" href=".#CLOSURES-and-CLASSES">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Let us construct a toy example that shows this, something just past a “hello world” of the different styles:</span>
<span class="c"># A class that creates callable adder instances </span>

<span class="k">class</span> <span class="nc">Adder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>    
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="n">m</span> 

<span class="n">add5_i</span> <span class="o">=</span> <span class="n">Adder</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>       
<span class="c"># "instance" or "imperative" We have constructed something callable that adds five to an argument passed in. Seems simple and mathematical enough. Let us also try it as a closure</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">make_adder</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">adder</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>        
        <span class="k">return</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span>    
    <span class="k">return</span> <span class="n">adder</span> 

<span class="n">add5_f</span> <span class="o">=</span> <span class="n">make_adder</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  
<span class="c"># "functional" So far these seem to amount to pretty much the same thing, but the mutable state in the instance provides a attractive nuisance:</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">add5_i</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> 
<span class="n">add5_f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>          <span class="c"># only argument affects result 15 </span>
<span class="n">add5_i</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>       <span class="c"># state is readily changeable </span>
<span class="n">add5_i</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>          <span class="c"># result is dependent on prior flow 20 </span>

<span class="c"># once the object exists, the closure behaves in a pure functional way, while the class instance remains </span>
<span class="c"># state dependent</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="METHODS-OF-CLASSES">METHODS OF CLASSES<a class="anchor-link" href=".#METHODS-OF-CLASSES">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># accessors are callables with a limited use (from a functional programming perspective) in that they take no </span>
<span class="c"># arguments as getters, and return no value as setters:</span>
<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="nd">@property</span>    
    <span class="k">def</span> <span class="nf">speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="nb">print</span><span class="p">(</span><span class="s">"Speed is"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span><span class="p">)</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span>
    <span class="nd">@speed</span><span class="o">.</span><span class="n">setter</span>    
    <span class="k">def</span> <span class="nf">speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>        
        <span class="nb">print</span><span class="p">(</span><span class="s">"Setting to"</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span> <span class="o">=</span> <span class="n">value</span>

<span class="c"># &gt;&gt; car = Car()  </span>
<span class="c"># &gt;&gt;&gt; car.speed = 80  # Odd syntax to pass one argument </span>
<span class="c"># Setting to 80 </span>
<span class="c"># &gt;&gt;&gt; x = car.speed </span>
<span class="c"># x is 80</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="STATIC-METHODS">STATIC METHODS<a class="anchor-link" href=".#STATIC-METHODS">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># One use of classes and their methods that is more closely aligned with a functional style of programming is to use </span>
<span class="c"># them simply as namespaces to hold a variety of related functions:</span>

<span class="kn">import</span> <span class="nn">math</span> 
<span class="k">class</span> <span class="nc">RightTriangle</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>    
    <span class="s">"Class used solely as namespace for related functions"</span>    
    <span class="nd">@staticmethod</span>    
    <span class="k">def</span> <span class="nf">hypotenuse</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>        
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="nd">@staticmethod</span>    
    <span class="k">def</span> <span class="nf">sin</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>        
        <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">RightTriangle</span><span class="o">.</span><span class="n">hypotenuse</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="nd">@staticmethod</span>    
    <span class="k">def</span> <span class="nf">cos</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>        
        <span class="k">return</span> <span class="n">b</span> <span class="o">/</span> <span class="n">RightTriangle</span><span class="o">.</span><span class="n">hypotenuse</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="GENERATOR-FUNCTIONS">GENERATOR FUNCTIONS<a class="anchor-link" href=".#GENERATOR-FUNCTIONS">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># A special sort of function in Python is one that contains a yield statement, which turns it into a generator. </span>
<span class="c"># What is returned from calling such a function is not a regular value, but rather an iterator that produces a </span>
<span class="c"># sequence of values as you call the next() function on it or loop over it.</span>

<span class="k">def</span> <span class="nf">get_primes</span><span class="p">():</span> 
    <span class="s">"Simple lazy Sieve of Eratosthenes"</span> 
    <span class="n">candidate</span> <span class="o">=</span> <span class="mi">2</span> 
    <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span> 
    <span class="k">while</span> <span class="k">True</span><span class="p">:</span> 
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">candidate</span> <span class="o">%</span> <span class="n">prime</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">prime</span> <span class="ow">in</span> <span class="n">found</span><span class="p">):</span> 
            <span class="k">yield</span> <span class="n">candidate</span> 
            <span class="n">found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span> 
        <span class="n">candidate</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">primes</span> <span class="o">=</span> <span class="n">get_primes</span><span class="p">()</span> 
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">primes</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">primes</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">primes</span><span class="p">))</span>
<span class="c"># (2, 3, 5) </span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">prime</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">primes</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">prime</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span> 
<span class="c">#    7 11 13 17 19 23 29 31 37 41 </span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>2 3 5
7 11 13 17 19 23 29 31 37 41 </pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="MULTIPLE-DISPATCHING">MULTIPLE DISPATCHING<a class="anchor-link" href=".#MULTIPLE-DISPATCHING">¶</a>
</h3>
<p>"A very interesting approach to programming multiple paths of execution is a technique called “multiple dispatch” or sometimes 'multimethods'. The idea here is to declare multiple signatures for a single function and call the actual computation that matches the types or properties of the calling arguments." 
Note: used to avoid many if-else statements to test matchings</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">from</span> <span class="nn">multipledispatch</span> <span class="k">import</span> <span class="n">dispatch</span>

<span class="k">class</span> <span class="nc">Thing</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="k">pass</span> 
<span class="k">class</span> <span class="nc">Rock</span><span class="p">(</span><span class="n">Thing</span><span class="p">):</span> <span class="k">pass</span>
<span class="k">class</span> <span class="nc">Paper</span><span class="p">(</span><span class="n">Thing</span><span class="p">):</span> <span class="k">pass</span> 
<span class="k">class</span> <span class="nc">Scissors</span><span class="p">(</span><span class="n">Thing</span><span class="p">):</span> <span class="k">pass</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Rock</span><span class="p">,</span> <span class="n">Rock</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="k">None</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Rock</span><span class="p">,</span> <span class="n">Paper</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">y</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Rock</span><span class="p">,</span> <span class="n">Scissors</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Paper</span><span class="p">,</span> <span class="n">Rock</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Paper</span><span class="p">,</span> <span class="n">Paper</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="k">None</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Paper</span><span class="p">,</span> <span class="n">Scissors</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Scissors</span><span class="p">,</span> <span class="n">Rock</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">y</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Scissors</span><span class="p">,</span> <span class="n">Paper</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="n">Scissors</span><span class="p">,</span> <span class="n">Scissors</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> 
    <span class="k">return</span> <span class="k">None</span>

<span class="nd">@dispatch</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">beats3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>    
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">Rock</span><span class="p">,</span> <span class="n">Paper</span><span class="p">,</span> <span class="n">Scissors</span><span class="p">)):</span>        
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">"Unknown first thing"</span><span class="p">)</span>    
    <span class="k">else</span><span class="p">:</span>        
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">"Unknown second thing"</span><span class="p">)</span>

<span class="n">rock</span><span class="p">,</span> <span class="n">paper</span> <span class="o">=</span> <span class="n">Rock</span><span class="p">(),</span> <span class="n">Paper</span><span class="p">()</span>        
<span class="nb">print</span><span class="p">(</span><span class="n">beats3</span><span class="p">(</span><span class="n">rock</span><span class="p">,</span> <span class="n">paper</span><span class="p">))</span>
<span class="c"># &lt;__main__.DuckPaper at 0x103b894a8&gt; </span>
<span class="c"># &gt;&gt;&gt; beats3(rock, 3) </span>
<span class="c"># TypeError: Unknown second thing</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;__main__.Paper object at 0x0000000003944C18&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="LAZY-EVALUATION">LAZY EVALUATION<a class="anchor-link" href=".#LAZY-EVALUATION">¶</a>
</h3>
<h4 id='Custom-sequence-using-"abc"'>Custom sequence using "abc"<a class="anchor-link" href=".#Custom-sequence-using-%22abc%22">¶</a>
</h4>
<p>"Given the get_primes() generator function discussed earlier, we might write our own container to simulate the same thing, for example:"</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="k">import</span> <span class="n">Sequence</span> 
<span class="k">class</span> <span class="nc">ExpandingSequence</span><span class="p">(</span><span class="n">Sequence</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">it</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">it</span> <span class="o">=</span> <span class="n">it</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="p">[]</span>    
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>        
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">index</span><span class="p">:</span>            
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">it</span><span class="p">))</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>    
    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">)</span> 

<span class="c"># This new container can be both lazy and also indexible:</span>
<span class="n">primes</span> <span class="o">=</span> <span class="n">ExpandingSequence</span><span class="p">(</span><span class="n">get_primes</span><span class="p">())</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">primes</span><span class="p">):</span>     
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span> 
<span class="c"># 2 3 5 7 11 13 17 19 23 29 </span>
<span class="n">primes</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>  <span class="c"># 31 </span>
<span class="n">primes</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>   <span class="c"># 13 </span>
<span class="nb">len</span><span class="p">(</span><span class="n">primes</span><span class="p">)</span> <span class="c"># 11 </span>
<span class="n">primes</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="c"># 547 </span>
<span class="nb">len</span><span class="p">(</span><span class="n">primes</span><span class="p">)</span> <span class="c"># 101</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Custom-iterator">Custom iterator<a class="anchor-link" href=".#Custom-iterator">¶</a>
</h4>
<p>"...writing custom iterators as generator functions is most natural. However, we can also create custom classes that obey the protocol (note: iterator); often these will have other behaviors (i.e., methods) as well, but most such behaviors necessarily rely on statefulness and side effects to be meaningful"</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="k">import</span> <span class="n">Iterable</span> 
<span class="k">class</span> <span class="nc">Fibonacci</span><span class="p">(</span><span class="n">Iterable</span><span class="p">):</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>    
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">return</span> <span class="bp">self</span>    
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>    
    <span class="k">def</span> <span class="nf">running_sum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>
    
<span class="n">fib</span> <span class="o">=</span> <span class="n">Fibonacci</span><span class="p">()</span> 
<span class="c"># fib.running_sum() # 0 </span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">fib</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span> 
<span class="c"># &gt;&gt;&gt; 1 1 2 3 5 8 13 21 34 55 </span>
<span class="c"># fib.running_sum() # 143 </span>
<span class="c"># next(fib) # 89 </span>

<span class="c"># Note:  a class that both implements the iterator protocol and also provides an additional method to return </span>
<span class="c"># something stateful about its instance. This approach can be usefull but not functional (because statefullness).</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>1 1 2 3 5 8 13 21 34 55 </pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Module:-itertools">Module: itertools<a class="anchor-link" href=".#Module:-itertools">¶</a>
</h5>
<p>"The module itertools is a collection of very powerful—and carefully designed—functions for performing iterator algebra. That is, these allow you to combine iterators in sophisticated ways without having to concretely instantiate anything more than is currently required"
<a href="https://docs.python.org/3.5/library/itertools.html">https://docs.python.org/3.5/library/itertools.html</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">():</span>     
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>      
    <span class="k">while</span> <span class="k">True</span><span class="p">:</span>          
        <span class="k">yield</span> <span class="n">a</span>          
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s">'__iter__'</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">())</span> <span class="ow">and</span> <span class="s">'__next__'</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">())</span> <span class="p">)</span>

<span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">tee</span><span class="p">,</span> <span class="n">accumulate</span> 
<span class="n">s</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">())</span> 
<span class="n">pairs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> 
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="p">(</span><span class="n">fib</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span> <span class="n">pairs</span><span class="p">):</span>      
    <span class="nb">print</span><span class="p">(</span><span class="n">fib</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span> 

<span class="c"># NOTE: zip(), map(), filter(), and range() (which is, in a sense, just a terminating itertools.count()) could well </span>
<span class="c"># live in itertools if they were not built-ins. That is, all of those functions lazily generate sequential items </span>
<span class="c"># (mostly based on existing iterables) without creating a concrete sequence</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class 'generator'&gt;
True
1 1
1 2
2 4
3 7
5 12
8 20
13 33
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Higher-Order-Functions">Higher Order Functions<a class="anchor-link" href=".#Higher-Order-Functions">¶</a>
</h3>
<p>"a higher-order function is simply a function that takes one or more functions as arguments and/or produces a function as a result."</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Classic "FP-style" </span>
<span class="n">transformed</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">tranformation</span><span class="p">,</span> <span class="n">iterator</span><span class="p">)</span> 
<span class="c"># Comprehension </span>
<span class="n">transformed</span> <span class="o">=</span> <span class="p">(</span><span class="n">transformation</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">)</span>
<span class="c"># Classic "FP-style" </span>
<span class="n">filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">predicate</span><span class="p">,</span> <span class="n">iterator</span><span class="p">)</span> 
<span class="c"># Comprehension </span>
<span class="n">filtered</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iterator</span> <span class="k">if</span> <span class="n">predicate</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> 
<span class="c"># The function functools.reduce() is very general, very powerful, and very subtle to use to its full power. It takes </span>
<span class="c"># successive items of an iterable, and combines them in some way. The most common use case for reduce() is probably </span>
<span class="c"># covered by the built-in sum(), which is a more compact spelling of:</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">reduce</span> 
<span class="n">total</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">it</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> 
<span class="c"># total = sum(it) </span>
<span class="c"># It may or may not be obvious that map() and filter() are also a special cases of reduce(). That is:</span>
<span class="n">add5</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span><span class="o">+</span><span class="mi">5</span> 
<span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">l</span><span class="o">+</span><span class="p">[</span><span class="n">add5</span><span class="p">(</span><span class="n">x</span><span class="p">)],</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="p">[])</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]</span> 
<span class="c"># simpler: map(add5, range(10)) </span>
<span class="n">isOdd</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span><span class="o">%</span><span class="k">2</span> 
<span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">l</span><span class="o">+</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">if</span> <span class="n">isOdd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">else</span> <span class="n">l</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="p">[])</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> 
<span class="c"># simpler: filter(isOdd, range(10))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="DECORATORS">DECORATORS<a class="anchor-link" href=".#DECORATORS">¶</a>
</h4>
<p>"probably the most common use of higher-order functions in Python is as decorators. Decorators in Python are possible 
because:"</p>
<ul>
<li>encapsulation: define a function inside a function, the contained function can access but not assign the container function</li>
<li>functions can be passed as a parameter (functions are first-class objects)</li>
<li>functions can return functions</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Taken from: http://thecodeship.com</span>

<span class="k">def</span> <span class="nf">strong_decorate</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="sd">'''first decorator'''</span>
    <span class="k">def</span> <span class="nf">func_wrapper</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"&lt;strong&gt;{0}&lt;/strong&gt;"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">func_wrapper</span>

<span class="k">def</span> <span class="nf">p_decorate</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="sd">'''second decorator'''</span>
    <span class="k">def</span> <span class="nf">func_wrapper</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"&lt;p&gt;{0}&lt;/p&gt;"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">func_wrapper</span>

<span class="nd">@strong_decorate</span>
<span class="nd">@p_decorate</span>
<span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">'''sample function'''</span>
    <span class="k">return</span> <span class="s">"lorem ipsum, {0} dolor sit amet"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="c">#my_get_text = p_decorate(get_text)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_text</span><span class="p">(</span><span class="s">"John"</span><span class="p">))</span>

<span class="c"># A function that takes another function as an argument, generates a new function, augmenting the work of the original </span>
<span class="c"># function, and returning the generated function so we can use it anywhere.</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;function strong_decorate.&lt;locals&gt;.func_wrapper at 0x000000000379AEA0&gt;
&lt;strong&gt;&lt;p&gt;lorem ipsum, John dolor sit amet&lt;/p&gt;&lt;/strong&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c">## Using self and *args and **kargs</span>

<span class="k">def</span> <span class="nf">p_decorate</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
   <span class="k">def</span> <span class="nf">func_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
       <span class="k">return</span> <span class="s">"&lt;p&gt;{0}&lt;/p&gt;"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
   <span class="k">return</span> <span class="n">func_wrapper</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"John"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">family</span> <span class="o">=</span> <span class="s">"Doe"</span>

    <span class="nd">@p_decorate</span>
    <span class="k">def</span> <span class="nf">get_fullname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s">" "</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span>

<span class="n">my_person</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">my_person</span><span class="o">.</span><span class="n">get_fullname</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;p&gt;John Doe&lt;/p&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c">## Passing arguments to decorators</span>

<span class="c"># Looking back at the example before the one above, you can notice how redundant the decorators in the example are. </span>
<span class="c"># 2 decorators each with the same functionality but wrapping the string with different tags. We can definitely do much </span>
<span class="c"># better than that. Why not have a more general implementation for one that takes the tag to wrap with as a string? </span>
<span class="c"># Yes please!</span>

<span class="c">#from functools import wraps</span>

<span class="k">def</span> <span class="nf">tags</span><span class="p">(</span><span class="n">tag_name</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">tags_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="c">#@wraps(func)</span>
        <span class="k">def</span> <span class="nf">func_wrapper</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="sd">""" this is a closure """</span>
            <span class="k">return</span> <span class="s">"&lt;{0}&gt;{1}&lt;/{0}&gt;"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">func</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">func_wrapper</span>
    <span class="k">return</span> <span class="n">tags_decorator</span>

<span class="nd">@tags</span><span class="p">(</span><span class="s">"p"</span><span class="p">)</span>
<span class="nd">@tags</span><span class="p">(</span><span class="s">"strong"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">"Hello "</span><span class="o">+</span><span class="n">name</span>

<span class="nb">print</span><span class="p">(</span><span class="n">get_text</span><span class="p">(</span><span class="s">"John"</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">get_text</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span> <span class="c"># print the closure name</span>

<span class="c"># NOTE: try to uncomment the import and the "wraps" decorator and see how the outer function name is printed properly </span>
<span class="c"># (good for debugging).</span>

<span class="c"># Links:</span>
<span class="c"># https://github.com/mjhea0/python-decorators</span>
<span class="c"># http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/</span>
<span class="c"># https://wiki.python.org/moin/PythonDecorators#What_is_a_Decorator</span>
<span class="c">## A guide to develop with Decorators:</span>
<span class="c"># http://www.artima.com/weblogs/viewpost.jsp?thread=240808</span>
<span class="c"># http://www.artima.com/weblogs/viewpost.jsp?thread=240845</span>
<span class="c"># http://www.artima.com/weblogs/viewpost.jsp?thread=241209</span>
<span class="c"># Lot of examples: https://wiki.python.org/moin/PythonDecoratorLibrary</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;p&gt;&lt;strong&gt;Hello John&lt;/strong&gt;&lt;/p&gt;
func_wrapper
</pre>
</div>
</div>

</div>
</div>

</div>
    </div>
  </div>

        </div>
                <ul class="pager hidden-print">
<li class="previous">
                <a href="../a-collection-of-ideas-and-chunks/" rel="prev" title="A Collection Of Ideas And Chunks">Previous post</a>
            </li>
            <li class="next">
                <a href="../eckel-on-decorators/" rel="next" title="Eckel On Decorators">Next post</a>
            </li>
        </ul>
</div>
            
        </div>
    </section><script src="../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
