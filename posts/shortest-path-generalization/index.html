<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Shortest Path Generalization | pyHummus</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://mec-is.github.io/posts/shortest-path-generalization/">
<link rel="icon" href="../../favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="lorenzogotuned">
<meta property="og:site_name" content="pyHummus">
<meta property="og:title" content="Shortest Path Generalization">
<meta property="og:url" content="http://mec-is.github.io/posts/shortest-path-generalization/">
<meta property="og:description" content="Using frontier's analysis:
####### Missionaries and Cannibals Game #######
# By Peter Norvig, Udacity.com CS212 Lesson 4
# -----------------
# User Instructions
# 
# Write a function, mc_problem2, tha">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-08-25T17:02:17+02:00">
<meta property="article:tag" content="Algorithms">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="https://profiles.udacity.com/u/lorenzomoriondo" title="Me At Udacity"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/lorenzogotuned" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://it.linkedin.com/in/lorenzomoriondo" title="My LinkedIn"><i class="icon-linkedin"></i></a></li>

        <li>        <footer id="footer" role="contentinfo"><p>2015 Content collected and organized by         <a href="mailto:tunedconsulting@gmail.com">lorenzogotuned</a>   Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>      This material has been collected for learning purposes only and no commercial use. All rights reserved to sources.</p>
            
        </footer>
</li>
        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Shortest Path Generalization</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2015-08-25T17:02:17+02:00">2015-08-25 17:02</time>
            
                      |  
        <a href="index.md" id="sourcelink">Source</a>

            <!-- Twitter Share Button -->
            <div style="min-height: 30px;">
                <a href="https://twitter.com/share" class="twitter-share-button" data-via="lorenzogotuned" data-hashtags="Python, coding">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>
            <div style="min-height: 30px;">
                <script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-counter="right"></script>
</div>
            <!-- -->
            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/algorithms/" rel="tag">Algorithms</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<p><img alt="Components for Shortest-Path-Search" src="../../assets/images/posts/shortest-path-search.png"></p>
<p>Using frontier's analysis:</p>
<pre class="code literal-block"><span class="err">#######</span> <span class="nx">Missionaries</span> <span class="nx">and</span> <span class="nx">Cannibals</span> <span class="nx">Game</span> <span class="err">#######</span>
<span class="err">#</span> <span class="nx">By</span> <span class="nx">Peter</span> <span class="nx">Norvig</span><span class="p">,</span> <span class="nx">Udacity</span><span class="p">.</span><span class="nx">com</span> <span class="nx">CS212</span> <span class="nx">Lesson</span> <span class="mi">4</span>
<span class="err">#</span> <span class="o">-----------------</span>
<span class="err">#</span> <span class="nx">User</span> <span class="nx">Instructions</span>
<span class="err">#</span> 
<span class="err">#</span> <span class="nx">Write</span> <span class="nx">a</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">mc_problem2</span><span class="p">,</span> <span class="nx">that</span> <span class="nx">solves</span> <span class="nx">the</span> <span class="nx">missionary</span> <span class="nx">and</span> <span class="nx">cannibal</span>
<span class="err">#</span> <span class="nx">problem</span> <span class="nx">by</span> <span class="nx">making</span> <span class="nx">a</span> <span class="nx">call</span> <span class="nx">to</span> <span class="nx">shortest_path_search</span><span class="p">.</span> <span class="nx">Add</span> <span class="nx">any</span> <span class="nx">code</span> <span class="nx">below</span>
<span class="err">#</span> <span class="nx">and</span> <span class="nx">change</span> <span class="nx">the</span> <span class="nx">arguments</span> <span class="k">in</span> <span class="nx">the</span> <span class="k">return</span> <span class="nx">statement</span><span class="s1">'s call to the </span>
<span class="s1"># shortest_path_search function.</span>

<span class="s1">def mc_problem2(start=(3, 3, 1, 0, 0, 0), goal=None):</span>
<span class="s1">    # your code here if necessary</span>
<span class="s1">    if goal is None:</span>
<span class="s1">        goal = (0, 0, 0) + start</span><span class="cp">[</span><span class="p">:</span><span class="mi">3</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">    return shortest_path_search(start, csuccessors, all_gone) # &lt;== insert arguments here</span>

<span class="s1">def all_gone(state): return state</span><span class="cp">[</span><span class="p">:</span><span class="mi">3</span><span class="cp">]</span><span class="s1"> == (0, 0, 0)</span>

<span class="s1">def shortest_path_search(start, successors, is_goal):</span>
<span class="s1">    """Find the shortest path from start state to a state</span>
<span class="s1">    such that is_goal(state) is true."""</span>
<span class="s1">    if is_goal(start):</span>
<span class="s1">        return </span><span class="cp">[</span><span class="nx">start</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">    explored = set()</span>
<span class="s1">    frontier = </span><span class="cp">[</span> <span class="err">[</span><span class="nx">start</span><span class="cp">]</span><span class="s1"> ] </span>
<span class="s1">    while frontier:</span>
<span class="s1">        path = frontier.pop(0)</span>
<span class="s1">        s = path</span><span class="cp">[</span><span class="o">-</span><span class="mi">1</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">        for (state, action) in successors(s).items():</span>
<span class="s1">            if state not in explored:</span>
<span class="s1">                explored.add(state)</span>
<span class="s1">                path2 = path + </span><span class="cp">[</span><span class="nx">action</span><span class="p">,</span> <span class="nx">state</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">                if is_goal(state):</span>
<span class="s1">                    return path2</span>
<span class="s1">                else:</span>
<span class="s1">                    frontier.append(path2)</span>
<span class="s1">    return Fail</span>
<span class="s1">Fail = </span><span class="cp">[]</span><span class="s1"></span>

<span class="s1">def csuccessors(state):</span>
<span class="s1">    """Find successors (including those that result in dining) to this</span>
<span class="s1">    state. But a state where the cannibals can dine has no successors."""</span>
<span class="s1">    M1, C1, B1, M2, C2, B2 = state</span>
<span class="s1">    ## Check for state with no successors</span>
<span class="s1">    if C1 &gt; M1 &gt; 0 or C2 &gt; M2 &gt; 0:</span>
<span class="s1">        return {}</span>
<span class="s1">    items = </span><span class="cp">[]</span><span class="s1"></span>
<span class="s1">    if B1 &gt; 0:</span>
<span class="s1">        items += </span><span class="cp">[</span><span class="p">(</span><span class="nx">sub</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">delta</span><span class="p">),</span> <span class="nx">a</span> <span class="o">+</span> <span class="s1">'-&gt;'</span><span class="p">)</span>
                  <span class="nx">for</span> <span class="nx">delta</span><span class="p">,</span> <span class="n">a</span> <span class="k">in</span> <span class="nx">deltas.items</span><span class="p">()</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">    if B2 &gt; 0:</span>
<span class="s1">        items += </span><span class="cp">[</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">delta</span><span class="p">),</span> <span class="s1">'&lt;-'</span> <span class="o">+</span> <span class="nx">a</span><span class="p">)</span>
                  <span class="nx">for</span> <span class="nx">delta</span><span class="p">,</span> <span class="n">a</span> <span class="k">in</span> <span class="nx">deltas.items</span><span class="p">()</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">    return dict(items)</span>

<span class="s1">def add(X, Y):</span>
<span class="s1">    "add two vectors, X and Y."</span>
<span class="s1">    return tuple(x+y for x,y in zip(X, Y))</span>

<span class="s1">def sub(X, Y):</span>
<span class="s1">    "subtract vector Y from X."</span>
<span class="s1">    return tuple(x-y for x,y in zip(X, Y))</span>

<span class="s1">deltas = {(2, 0, 1,    -2,  0, -1): '</span><span class="nx">MM</span><span class="s1">',</span>
<span class="s1">          (0, 2, 1,     0, -2, -1): '</span><span class="nx">CC</span><span class="s1">',</span>
<span class="s1">          (1, 1, 1,    -1, -1, -1): '</span><span class="nx">MC</span><span class="s1">',</span>
<span class="s1">          (1, 0, 1,    -1,  0, -1): '</span><span class="nx">M</span><span class="s1">',</span>
<span class="s1">          (0, 1, 1,     0, -1, -1): '</span><span class="nx">C</span><span class="s1">'}</span>

<span class="s1">def test():</span>
<span class="s1">    assert mc_problem2(start=(1, 1, 1, 0, 0, 0)) == </span><span class="cp">[</span>
                             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'MC-&gt;'</span><span class="p">,</span>
                             <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">    assert mc_problem2() == </span><span class="cp">[</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'CC-&gt;'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">'&lt;-C'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'CC-&gt;'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">'&lt;-C'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'MM-&gt;'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">'&lt;-MC'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'MM-&gt;'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">'&lt;-C'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'CC-&gt;'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">'&lt;-C'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">'CC-&gt;'</span><span class="p">,</span> 
                             <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="cp">]</span><span class="s1"></span>
<span class="s1">    return '</span><span class="nx">tests</span> <span class="nx">pass</span><span class="err">'</span>

<span class="nx">print</span> <span class="nx">test</span><span class="p">()</span> 
</pre>


<p><img alt="Components for Lowest-Cost-Search" src="../../assets/images/posts/lowest-cost-search.png"></p>
<pre class="code literal-block"><span class="err">#######</span> <span class="nx">The</span> <span class="nx">Bridge</span> <span class="nx">Game</span> <span class="err">#######</span>
<span class="err">#</span> <span class="nx">By</span> <span class="nx">Peter</span> <span class="nx">Norvig</span><span class="p">,</span> <span class="nx">Udacity</span><span class="p">.</span><span class="nx">com</span> <span class="nx">CS212</span> <span class="nx">Lesson</span> <span class="mi">4</span>
<span class="err">#</span> <span class="o">-----------------</span>
<span class="err">#</span> <span class="nx">User</span> <span class="nx">Instructions</span>
<span class="err">#</span> 
<span class="err">#</span> <span class="nx">In</span> <span class="k">this</span> <span class="nx">problem</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">will</span> <span class="nx">generalize</span> <span class="nx">the</span> <span class="nx">bridge</span> <span class="nx">problem</span> 
<span class="err">#</span> <span class="nx">by</span> <span class="nx">writing</span> <span class="nx">a</span> <span class="kd">function</span> <span class="nx">bridge_problem3</span><span class="p">,</span> <span class="nx">that</span> <span class="nx">makes</span> <span class="nx">a</span> <span class="nx">call</span>
<span class="err">#</span> <span class="nx">to</span> <span class="nx">lowest_cost_search</span><span class="p">.</span>

<span class="nx">def</span> <span class="nx">bridge_problem3</span><span class="p">(</span><span class="nx">here</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">"""Find the fastest (least elapsed time) path to </span>
<span class="s2">    the goal in the bridge problem."""</span>
    <span class="nx">start</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="nx">here</span><span class="p">)</span> <span class="o">|</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="s1">'light'</span><span class="cp">]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">())</span>
    <span class="k">return</span> <span class="nx">lowest_cost_search</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">bsuccessor2</span><span class="p">,</span> <span class="nx">all_over</span><span class="p">,</span> <span class="nx">bcost</span><span class="p">)</span>

<span class="nx">def</span> <span class="nx">all_over</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">here</span><span class="p">,</span> <span class="nx">there</span> <span class="o">=</span> <span class="nx">state</span>
    <span class="k">return</span> <span class="nx">not</span> <span class="nx">here</span> <span class="nx">or</span> <span class="nx">here</span> <span class="o">==</span> <span class="nx">set</span><span class="p">(</span><span class="cp">[</span><span class="s1">'light'</span><span class="cp">]</span><span class="p">)</span> 

<span class="nx">def</span> <span class="nx">lowest_cost_search</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">successors</span><span class="p">,</span> <span class="nx">is_goal</span><span class="p">,</span> <span class="nx">action_cost</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">"""Return the lowest cost path, starting from start state,</span>
<span class="s2">    and considering successors(state) =&gt; {state:action,...},</span>
<span class="s2">    that ends in a state for which is_goal(state) is true,</span>
<span class="s2">    where the cost of a path is the sum of action costs,</span>
<span class="s2">    which are given by action_cost(action)."""</span>
    <span class="nx">Fail</span> <span class="o">=</span> <span class="cp">[]</span>
    <span class="nx">explored</span> <span class="o">=</span> <span class="nx">set</span><span class="p">()</span> <span class="err">#</span> <span class="nx">set</span> <span class="nx">of</span> <span class="nx">states</span> <span class="nx">we</span> <span class="nx">have</span> <span class="nx">visited</span>
    <span class="nx">frontier</span> <span class="o">=</span> <span class="cp">[</span> <span class="err">[</span><span class="nx">start</span><span class="cp">]</span> <span class="p">]</span> <span class="err">#</span> <span class="nx">ordered</span> <span class="nx">list</span> <span class="nx">of</span> <span class="nx">paths</span> <span class="nx">we</span> <span class="nx">have</span> <span class="nx">blazed</span>
    <span class="k">while</span> <span class="nx">frontier</span><span class="o">:</span>
        <span class="nx">path</span> <span class="o">=</span> <span class="nx">frontier</span><span class="p">.</span><span class="nx">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="nx">state1</span> <span class="o">=</span> <span class="nx">final_state</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="nx">is_goal</span><span class="p">(</span><span class="nx">state1</span><span class="p">)</span><span class="o">:</span>  
            <span class="k">return</span> <span class="nx">path</span>
        <span class="nx">explored</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">state1</span><span class="p">)</span>
        <span class="nx">pcost</span> <span class="o">=</span> <span class="nx">path_cost</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="k">in</span> <span class="nx">successors</span><span class="p">(</span><span class="nx">state1</span><span class="p">).</span><span class="nx">items</span><span class="p">()</span><span class="o">:</span>
            <span class="k">if</span> <span class="nx">state</span> <span class="nx">not</span> <span class="k">in</span> <span class="nx">explored</span><span class="o">:</span>
                <span class="nx">total_cost</span> <span class="o">=</span> <span class="nx">pcost</span> <span class="o">+</span> <span class="nx">action_cost</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span>
                <span class="nx">path2</span> <span class="o">=</span> <span class="nx">path</span> <span class="o">+</span> <span class="cp">[</span><span class="p">(</span><span class="nx">action</span><span class="p">,</span> <span class="nx">total_cost</span><span class="p">),</span> <span class="nx">state</span><span class="cp">]</span>
                <span class="nx">add_to_frontier</span><span class="p">(</span><span class="nx">frontier</span><span class="p">,</span> <span class="nx">path2</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">Fail</span>

<span class="nx">def</span> <span class="nx">final_state</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span><span class="o">:</span> <span class="k">return</span> <span class="nx">path</span><span class="cp">[</span><span class="o">-</span><span class="mi">1</span><span class="cp">]</span>

<span class="nx">def</span> <span class="nx">path_cost</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">"The total cost of a path (which is stored in a tuple with the final action)."</span>
    <span class="k">if</span> <span class="nx">len</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="o">:</span>
        <span class="nx">action</span><span class="p">,</span> <span class="nx">total_cost</span> <span class="o">=</span> <span class="nx">path</span><span class="cp">[</span><span class="o">-</span><span class="mi">2</span><span class="cp">]</span>
        <span class="k">return</span> <span class="nx">total_cost</span>

<span class="nx">def</span> <span class="nx">add_to_frontier</span><span class="p">(</span><span class="nx">frontier</span><span class="p">,</span> <span class="nx">path</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">"Add path to frontier, replacing costlier path if there is one."</span>
    <span class="err">#</span> <span class="p">(</span><span class="nx">This</span> <span class="nx">could</span> <span class="nx">be</span> <span class="nx">done</span> <span class="nx">more</span> <span class="nx">efficiently</span><span class="p">.)</span>
    <span class="err">#</span> <span class="nx">Find</span> <span class="k">if</span> <span class="nx">there</span> <span class="nx">is</span> <span class="nx">an</span> <span class="nx">old</span> <span class="nx">path</span> <span class="nx">to</span> <span class="nx">the</span> <span class="kr">final</span> <span class="nx">state</span> <span class="nx">of</span> <span class="k">this</span> <span class="nx">path</span><span class="p">.</span>
    <span class="nx">old</span> <span class="o">=</span> <span class="nx">None</span>
    <span class="k">for</span> <span class="nx">i</span><span class="p">,</span><span class="nx">p</span> <span class="k">in</span> <span class="nx">enumerate</span><span class="p">(</span><span class="nx">frontier</span><span class="p">)</span><span class="o">:</span>
        <span class="k">if</span> <span class="nx">final_state</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="o">==</span> <span class="nx">final_state</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span><span class="o">:</span>
            <span class="nx">old</span> <span class="o">=</span> <span class="nx">i</span>
            <span class="k">break</span>
    <span class="k">if</span> <span class="nx">old</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">None</span> <span class="nx">and</span> <span class="nx">path_cost</span><span class="p">(</span><span class="nx">frontier</span><span class="cp">[</span><span class="nx">old</span><span class="cp">]</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">path_cost</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span><span class="o">:</span>
        <span class="k">return</span> <span class="err">#</span> <span class="nx">Old</span> <span class="nx">path</span> <span class="nx">was</span> <span class="nx">better</span><span class="p">;</span> <span class="k">do</span> <span class="nx">nothing</span>
    <span class="nx">elif</span> <span class="nx">old</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">None</span><span class="o">:</span>
        <span class="nx">del</span> <span class="nx">frontier</span><span class="cp">[</span><span class="nx">old</span><span class="cp">]</span> <span class="err">#</span> <span class="nx">Old</span> <span class="nx">path</span> <span class="nx">was</span> <span class="nx">worse</span><span class="p">;</span> <span class="k">delete</span> <span class="nx">it</span>
    <span class="err">##</span> <span class="nx">Now</span> <span class="nx">add</span> <span class="nx">the</span> <span class="k">new</span> <span class="nx">path</span> <span class="nx">and</span> <span class="nx">re</span><span class="o">-</span><span class="nx">sort</span>
    <span class="nx">frontier</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
    <span class="nx">frontier</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">key</span><span class="o">=</span><span class="nx">path_cost</span><span class="p">)</span>

<span class="nx">def</span> <span class="nx">bsuccessors2</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">"""Return a dict of {state:action} pairs.  A state is a (here, there) tuple,</span>
<span class="s2">    where here and there are frozensets of people (indicated by their times) and/or</span>
<span class="s2">    the light."""</span>
    <span class="nx">here</span><span class="p">,</span> <span class="nx">there</span> <span class="o">=</span> <span class="nx">state</span>
    <span class="k">if</span> <span class="s1">'light'</span> <span class="k">in</span> <span class="nx">here</span><span class="o">:</span>
        <span class="k">return</span> <span class="nx">dict</span><span class="p">(((</span><span class="nx">here</span>  <span class="o">-</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">),</span>
                      <span class="nx">there</span> <span class="o">|</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">)),</span>
                     <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">'-&gt;'</span><span class="p">))</span>
                    <span class="k">for</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">here</span> <span class="k">if</span> <span class="nx">a</span> <span class="nx">is</span> <span class="nx">not</span> <span class="s1">'light'</span>
                    <span class="k">for</span> <span class="nx">b</span> <span class="k">in</span> <span class="nx">here</span> <span class="k">if</span> <span class="nx">b</span> <span class="nx">is</span> <span class="nx">not</span> <span class="s1">'light'</span><span class="p">)</span>
    <span class="k">else</span><span class="o">:</span>
        <span class="k">return</span> <span class="nx">dict</span><span class="p">(((</span><span class="nx">here</span>  <span class="o">|</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">),</span>
                      <span class="nx">there</span> <span class="o">-</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">)),</span>
                     <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">'&lt;-'</span><span class="p">))</span>
                    <span class="k">for</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">there</span> <span class="k">if</span> <span class="nx">a</span> <span class="nx">is</span> <span class="nx">not</span> <span class="s1">'light'</span>
                    <span class="k">for</span> <span class="nx">b</span> <span class="k">in</span> <span class="nx">there</span> <span class="k">if</span> <span class="nx">b</span> <span class="nx">is</span> <span class="nx">not</span> <span class="s1">'light'</span><span class="p">)</span>

<span class="nx">def</span> <span class="nx">bcost</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">"Returns the cost (a number) of an action in the bridge problem."</span>
    <span class="err">#</span> <span class="nx">An</span> <span class="nx">action</span> <span class="nx">is</span> <span class="nx">an</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">arrow</span><span class="p">)</span> <span class="nx">tuple</span><span class="p">;</span> <span class="nx">a</span> <span class="nx">and</span> <span class="nx">b</span> <span class="nx">are</span> <span class="nx">times</span><span class="p">;</span> <span class="nx">arrow</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">string</span>
    <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">arrow</span> <span class="o">=</span> <span class="nx">action</span>
    <span class="k">return</span> <span class="nx">max</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>

<span class="nx">def</span> <span class="nx">test</span><span class="p">()</span><span class="o">:</span>
    <span class="nx">here</span> <span class="o">=</span> <span class="cp">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="cp">]</span>
    <span class="nx">assert</span> <span class="nx">bridge_problem3</span><span class="p">(</span><span class="nx">here</span><span class="p">)</span> <span class="o">==</span> <span class="cp">[</span>
            <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="err">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'light'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="cp">]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[]</span><span class="p">)),</span> 
            <span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'-&gt;'</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> 
            <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="cp">]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">)),</span> 
            <span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'&lt;-'</span><span class="p">),</span> <span class="mi">4</span><span class="p">),</span> 
            <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="s1">'light'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="cp">]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">1</span><span class="cp">]</span><span class="p">)),</span> 
            <span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'-&gt;'</span><span class="p">),</span> <span class="mi">14</span><span class="p">),</span> 
            <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">2</span><span class="cp">]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">)),</span> 
            <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'&lt;-'</span><span class="p">),</span> <span class="mi">15</span><span class="p">),</span> 
            <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="cp">]</span><span class="p">)),</span> 
            <span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'-&gt;'</span><span class="p">),</span> <span class="mi">17</span><span class="p">),</span> 
            <span class="p">(</span><span class="nx">frozenset</span><span class="p">(</span><span class="cp">[]</span><span class="p">),</span> <span class="nx">frozenset</span><span class="p">(</span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'light'</span><span class="cp">]</span><span class="p">))]</span>
    <span class="k">return</span> <span class="s1">'test passes'</span>

<span class="nx">print</span> <span class="nx">test</span><span class="p">()</span>
</pre>
</div>
        </div>
                <ul class="pager hidden-print">
<li class="previous">
                <a href="../untitled/" rel="prev" title="Untitled">Previous post</a>
            </li>
        </ul>
</div>
            
        </div>
    </section><script src="../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
