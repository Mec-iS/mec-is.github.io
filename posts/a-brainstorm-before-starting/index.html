<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>A Brainstorm Before Starting | pyHummus</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://mec-is.github.io/posts/a-brainstorm-before-starting/">
<link rel="icon" href="../../favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="lorenzogotuned">
<meta property="og:site_name" content="pyHummus">
<meta property="og:title" content="A Brainstorm Before Starting">
<meta property="og:url" content="http://mec-is.github.io/posts/a-brainstorm-before-starting/">
<meta property="og:description" content="A Brainstorm before starting¶Taken from: Julien Danjou's Hacker's Guide To Python






In [2]:

    
import this












The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-07-29T15:41:43+02:00">
<meta property="article:tag" content="Hacking">
<meta property="article:tag" content="Testing">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="https://profiles.udacity.com/u/lorenzomoriondo" title="Me At Udacity"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/lorenzogotuned" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://it.linkedin.com/in/lorenzomoriondo" title="My LinkedIn"><i class="icon-linkedin"></i></a></li>

        <li>        <footer id="footer" role="contentinfo"><p>2015 Content collected and organized by         <a href="mailto:tunedconsulting@gmail.com">lorenzogotuned</a>   Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>      This material has been collected for learning purposes only and no commercial use. All rights reserved to sources.</p>
            
        </footer>
</li>
        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">A Brainstorm Before Starting</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2015-07-29T15:41:43+02:00">2015-07-29 15:41</time>
            
                      |  
        <a href="index.ipynb" id="sourcelink">Source</a>

            <!-- Twitter Share Button -->
            <div style="min-height: 30px;">
                <a href="https://twitter.com/share" class="twitter-share-button" data-via="lorenzogotuned" data-hashtags="Python, coding">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>
            <div style="min-height: 30px;">
                <script type="text/javascript" src="http://platform.linkedin.com/in.js"></script><script type="in/share" data-counter="right"></script>
</div>
            <!-- -->
            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/hacking/" rel="tag">Hacking</a></li>
           <li><a class="tag p-category" href="../../categories/testing/" rel="tag">Testing</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-Brainstorm-before-starting">A Brainstorm before starting<a class="anchor-link" href=".#A-Brainstorm-before-starting">¶</a>
</h2>
<p>Taken from: Julien Danjou's Hacker's Guide To Python</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">this</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">builtin_module_names</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[1]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>('_ast',
 '_bisect',
 '_codecs',
 '_codecs_cn',
 '_codecs_hk',
 '_codecs_iso2022',
 '_codecs_jp',
 '_codecs_kr',
 '_codecs_tw',
 '_collections',
 '_csv',
 '_datetime',
 '_functools',
 '_heapq',
 '_imp',
 '_io',
 '_json',
 '_locale',
 '_lsprof',
 '_md5',
 '_multibytecodec',
 '_pickle',
 '_random',
 '_sha1',
 '_sha256',
 '_sha512',
 '_sre',
 '_string',
 '_struct',
 '_symtable',
 '_thread',
 '_warnings',
 '_weakref',
 '_winapi',
 'array',
 'atexit',
 'audioop',
 'binascii',
 'builtins',
 'cmath',
 'errno',
 'faulthandler',
 'gc',
 'itertools',
 'marshal',
 'math',
 'mmap',
 'msvcrt',
 'nt',
 'operator',
 'parser',
 'signal',
 'sys',
 'time',
 'winreg',
 'xxsubtype',
 'zipimport',
 'zlib')</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">permutations</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>120
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>"Whenever you are about to write our own function to handle a simple task, please <strong>stop</strong> and look through the standard library first."</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>"There’s a few of the standard modules that you should definitely know about:</p>
<ul>
<li>operator: provides functions implementing the basic Python operators which you can use instead of having t owrite your own lambda expressions</li>
<li>os: provides access to basic OS functions. </li>
<li>random: provides functions for generating pseudo-random numbers. </li>
<li>re: provides regular expression functionalities.</li>
<li>functools</li>
<li>iterators</li>
<li>uuid: allows to autogenerate UUIDs(Universall Unique Identifiers)."</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fixtures">Fixtures<a class="anchor-link" href=".#Fixtures">¶</a>
</h3>
<p>"In unit testing, <strong>fixtures</strong> represent components that are set up before a test, and cleaned up ater the test is done. It’s usually a good idea to build a special kind of component for them."</p>
<h4 id="Basics">Basics<a class="anchor-link" href=".#Basics">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c">## Unittest setUp() and tearDown(). Running code before and after unittest</span>

<span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">TestMe</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span> 
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">test_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">test_has_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="fixtures-module">fixtures module<a class="anchor-link" href=".#fixtures-module">¶</a>
</h4>
<p>"The fixtures module provides a few built-in fixtures, like <code>fixtures.Environment</code> Variable – useful for adding or changing a variable in <code>os.environ</code> that will be reset upon test exit."</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">fixtures</span> <span class="c"># not part of the standard library</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">TestEnviron</span><span class="p">(</span><span class="n">fixtures</span><span class="o">.</span><span class="n">TestWithFixtures</span><span class="p">):</span> <span class="c"># inherits from unittest TestCase</span>
    <span class="k">def</span> <span class="nf">test_environ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="n">fixture</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useFixture</span><span class="p">(</span><span class="n">fixtures</span><span class="o">.</span><span class="n">EnvironmentVariable</span><span class="p">(</span><span class="s">"FOOBAR"</span><span class="p">,</span> <span class="s">"42"</span><span class="p">))</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"FOOBAR"</span><span class="p">),</span> <span class="s">"42"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_environ_no_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"FOOBAR"</span><span class="p">),</span> <span class="k">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Mocking">Mocking<a class="anchor-link" href=".#Mocking">¶</a>
</h3>
<p>"Mock objects are simulated objects that mimic the behaviour of real application objects, but in particular and controlled ways. These are especially useful in creating environments that describe precisely the conditions for which you would like to testcode"</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">from</span> <span class="nn">unittest</span> <span class="k">import</span> <span class="n">mock</span> 

<span class="n">m</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">()</span> 
<span class="n">m</span><span class="o">.</span><span class="n">some_method</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="mi">42</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">some_method</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">print_hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s">"hello world!"</span><span class="p">)</span> 
    <span class="k">return</span> <span class="mi">43</span> 

<span class="n">m</span><span class="o">.</span><span class="n">some_method</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="n">print_hello</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">some_method</span><span class="p">())</span>

<span class="n">m</span><span class="o">.</span><span class="n">some_method</span><span class="o">.</span><span class="n">call_count</span>  <span class="c"># stats on method calling</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>42
hello world!
43
</pre>
</div>
</div>

<div class="output_area">
<div class="prompt output_prompt">Out[11]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example: Using <code>mock.patch</code> to test a set of behaviour</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">unittest</span> 
<span class="kn">import</span> <span class="nn">mock</span>

<span class="k">class</span> <span class="nc">WhereIsPythonError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> 
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">is_python_still_a_programming_language</span><span class="p">():</span> 
    <span class="k">try</span><span class="p">:</span> 
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://python.org"</span><span class="p">)</span> 
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span> 
        <span class="k">pass</span> 
    <span class="k">else</span><span class="p">:</span> 
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span> 
            <span class="k">return</span> <span class="s">'Python is a programming language'</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span> 
    <span class="k">raise</span> <span class="n">WhereIsPythonError</span><span class="p">(</span><span class="s">"Something bad happened"</span><span class="p">)</span>
        
<span class="k">def</span> <span class="nf">get_fake_get</span><span class="p">(</span><span class="n">status_code</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span> 
    <span class="n">m</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">()</span> 
    <span class="n">m</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="n">status_code</span> 
    <span class="n">m</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span> 
    <span class="k">def</span> <span class="nf">fake_get</span><span class="p">(</span><span class="n">url</span><span class="p">):</span> 
        <span class="k">return</span> <span class="n">m</span> 
    <span class="k">return</span> <span class="n">fake_get</span>

<span class="k">def</span> <span class="nf">raise_get</span><span class="p">(</span><span class="n">url</span><span class="p">):</span> 
    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">"Unable to fetch url %s"</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">TestPython</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span> 
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">'requests.get'</span><span class="p">,</span> <span class="n">get_fake_get</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">'Python is a programming language for sure'</span><span class="p">))</span> 
    <span class="k">def</span> <span class="nf">test_python_is</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">is_python_still_a_programming_language</span><span class="p">())</span>
        
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">'requests.get'</span><span class="p">,</span> <span class="n">get_fake_get</span><span class="p">(</span> <span class="mi">200</span><span class="p">,</span> <span class="s">'Python is no more a programming language'</span><span class="p">))</span> 
    <span class="k">def</span> <span class="nf">test_python_is_not</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">is_python_still_a_programming_language</span><span class="p">())</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">'requests.get'</span><span class="p">,</span> <span class="n">get_fake_get</span><span class="p">(</span> <span class="mi">404</span><span class="p">,</span> <span class="s">'Whatever'</span><span class="p">))</span> 
    <span class="k">def</span> <span class="nf">test_bad_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">WhereIsPythonError</span><span class="p">,</span> <span class="n">is_python_still_a_programming_language</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">'requests.get'</span><span class="p">,</span> <span class="n">raise_get</span><span class="p">)</span> 
    <span class="k">def</span> <span class="nf">test_ioerror</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">WhereIsPythonError</span><span class="p">,</span> <span class="n">is_python_still_a_programming_language</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Scenarios">Scenarios<a class="anchor-link" href=".#Scenarios">¶</a>
</h3>
<p>"This package provides an easy way to run a class test against a different set of scenarios generated at run-time."
Same example as in Mocking, the test runs three times because three scenarios are defined:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">mock</span> 
<span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">testscenarios</span>

<span class="k">class</span> <span class="nc">WhereIsPythonError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> 
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">is_python_still_a_programming_language</span><span class="p">():</span> 
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://python.org"</span><span class="p">)</span> 
    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span> 
        <span class="k">return</span> <span class="s">'Python is a programming language'</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span> 
    <span class="k">raise</span> <span class="n">WhereIsPythonError</span><span class="p">(</span><span class="s">"Something bad happened"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_fake_get</span><span class="p">(</span><span class="n">status_code</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span> 
    <span class="n">m</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">()</span> 
    <span class="n">m</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="n">status_code</span>
    <span class="n">m</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span> 
    <span class="k">def</span> <span class="nf">fake_get</span><span class="p">(</span><span class="n">url</span><span class="p">):</span> 
        <span class="k">return</span> <span class="n">m</span> 
    <span class="k">return</span> <span class="n">fake_get</span>

<span class="k">class</span> <span class="nc">TestPythonErrorCode</span><span class="p">(</span><span class="n">testscenarios</span><span class="o">.</span><span class="n">TestWithScenarios</span><span class="p">):</span> 
    <span class="n">scenarios</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s">'Not found'</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">)),</span> 
                  <span class="p">(</span><span class="s">'Client error'</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)),</span> 
                  <span class="p">(</span><span class="s">'Server error'</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">)),</span> <span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">test_python_status_code_handling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">'requests.get'</span><span class="p">,</span> <span class="n">get_fake_get</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="s">'Python is a programming language for sure'</span><span class="p">)):</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">WhereIsPythonError</span><span class="p">,</span> <span class="n">is_python_still_a_programming_language</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Profiling">Profiling<a class="anchor-link" href=".#Profiling">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">cProfile</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">print_hello</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">print_it</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s">'here'</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s">"hello world!"</span><span class="p">)</span> 
    <span class="n">print_it</span><span class="p">()</span>
    <span class="k">return</span> <span class="mi">43</span> 


<span class="n">cProfile</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s">'print_hello()'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>hello world!
here
         501 function calls (497 primitive calls) in 1.005 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    1.005    1.005 &lt;ipython-input-7-04c863fb3a13&gt;:4(print_hello)
        1    0.000    0.000    1.004    1.004 &lt;ipython-input-7-04c863fb3a13&gt;:5(print_it)
        1    0.000    0.000    1.005    1.005 &lt;string&gt;:1(&lt;module&gt;)
        4    0.000    0.000    0.002    0.001 __init__.py:274(dumps)
        1    0.000    0.000    0.000    0.000 attrsettr.py:35(__getattr__)
        1    0.000    0.000    0.000    0.000 cp1252.py:11(encode)
        4    0.000    0.000    0.000    0.000 encoder.py:120(__init__)
        4    0.000    0.000    0.002    0.000 encoder.py:248(encode)
        4    0.000    0.000    0.000    0.000 encoder.py:277(iterencode)
        4    0.000    0.000    0.000    0.000 encoder.py:380(_make_iterencode)
       26    0.000    0.000    0.000    0.000 encoder.py:41(encode_basestring)
        1    0.000    0.000    0.000    0.000 encoder.py:51(replace)
       60    0.000    0.000    0.001    0.000 encoder.py:513(_iterencode_dict)
    64/60    0.000    0.000    0.002    0.000 encoder.py:600(_iterencode)
        1    0.000    0.000    0.000    0.000 hmac.py:114(hexdigest)
        4    0.000    0.000    0.000    0.000 hmac.py:75(update)
        1    0.000    0.000    0.000    0.000 hmac.py:82(copy)
        1    0.000    0.000    0.000    0.000 hmac.py:95(_current)
        5    0.000    0.000    0.000    0.000 iostream.py:102(_check_mp_mode)
        1    0.000    0.000    0.000    0.000 iostream.py:123(_flush_from_subprocesses)
        1    0.000    0.000    0.003    0.003 iostream.py:151(flush)
        4    0.000    0.000    0.003    0.001 iostream.py:207(write)
        1    0.000    0.000    0.000    0.000 iostream.py:238(_flush_buffer)
        1    0.000    0.000    0.000    0.000 iostream.py:247(_new_buffer)
        6    0.000    0.000    0.000    0.000 iostream.py:93(_is_master_process)
        1    0.000    0.000    0.000    0.000 iostream.py:96(_is_master_thread)
        4    0.000    0.000    0.002    0.001 jsonapi.py:31(dumps)
        1    0.000    0.000    0.000    0.000 jsonutil.py:102(date_default)
        1    0.000    0.000    0.000    0.000 poll.py:77(poll)
        1    0.000    0.000    0.000    0.000 py3compat.py:18(encode)
        1    0.000    0.000    0.000    0.000 session.py:195(msg_header)
        1    0.000    0.000    0.000    0.000 session.py:200(extract_header)
        1    0.000    0.000    0.000    0.000 session.py:441(msg_id)
        1    0.000    0.000    0.000    0.000 session.py:493(msg_header)
        1    0.000    0.000    0.000    0.000 session.py:496(msg)
        1    0.000    0.000    0.000    0.000 session.py:515(sign)
        1    0.000    0.000    0.002    0.002 session.py:530(serialize)
        1    0.000    0.000    0.003    0.003 session.py:589(send)
        1    0.000    0.000    0.000    0.000 session.py:655(&lt;listcomp&gt;)
        4    0.000    0.000    0.002    0.001 session.py:84(&lt;lambda&gt;)
        1    0.000    0.000    0.000    0.000 socket.py:289(send_multipart)
        1    0.000    0.000    0.000    0.000 threading.py:1055(ident)
        1    0.000    0.000    0.000    0.000 threading.py:1204(current_thread)
       13    0.000    0.000    0.000    0.000 traitlets.py:395(__get__)
        1    0.000    0.000    0.000    0.000 uuid.py:104(__init__)
        1    0.000    0.000    0.000    0.000 uuid.py:230(__str__)
        1    0.000    0.000    0.000    0.000 uuid.py:563(uuid4)
        1    0.000    0.000    0.000    0.000 {built-in method __new__ of type object at 0x000000001E350250}
        1    0.000    0.000    0.000    0.000 {built-in method charmap_encode}
        1    0.000    0.000    1.005    1.005 {built-in method exec}
        1    0.000    0.000    0.000    0.000 {built-in method get_ident}
        7    0.000    0.000    0.000    0.000 {built-in method getattr}
        7    0.000    0.000    0.000    0.000 {built-in method getpid}
        1    0.000    0.000    0.000    0.000 {built-in method hasattr}
        4    0.000    0.000    0.000    0.000 {built-in method id}
      135    0.000    0.000    0.000    0.000 {built-in method isinstance}
        8    0.000    0.000    0.000    0.000 {built-in method len}
        1    0.000    0.000    0.000    0.000 {built-in method locals}
        1    0.000    0.000    0.000    0.000 {built-in method max}
        1    0.000    0.000    0.000    0.000 {built-in method now}
        2    0.000    0.000    0.003    0.002 {built-in method print}
        5    1.001    0.200    1.001    0.200 {built-in method sleep}
        4    0.000    0.000    0.000    0.000 {built-in method time}
        1    0.000    0.000    0.000    0.000 {built-in method urandom}
        3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
        4    0.000    0.000    0.000    0.000 {method 'clear' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'close' of '_io.StringIO' objects}
        3    0.000    0.000    0.000    0.000 {method 'copy' of '_hashlib.HASH' objects}
        1    0.000    0.000    0.000    0.000 {method 'copy' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'count' of 'list' objects}
        1    0.000    0.000    0.000    0.000 {method 'digest' of '_hashlib.HASH' objects}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        5    0.000    0.000    0.000    0.000 {method 'encode' of 'str' objects}
        2    0.000    0.000    0.000    0.000 {method 'extend' of 'list' objects}
        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'getvalue' of '_io.StringIO' objects}
        1    0.000    0.000    0.000    0.000 {method 'group' of '_sre.SRE_Match' objects}
        1    0.000    0.000    0.000    0.000 {method 'hexdigest' of '_hashlib.HASH' objects}
        1    0.000    0.000    0.000    0.000 {method 'isoformat' of 'datetime.datetime' objects}
        3    0.001    0.000    0.001    0.000 {method 'items' of 'dict' objects}
        4    0.000    0.000    0.000    0.000 {method 'join' of 'str' objects}
        7    0.000    0.000    0.000    0.000 {method 'send' of 'zmq.backend.cython.socket.Socket' objects}
       26    0.000    0.000    0.000    0.000 {method 'sub' of '_sre.SRE_Pattern' objects}
        5    0.000    0.000    0.000    0.000 {method 'update' of '_hashlib.HASH' objects}
        1    0.000    0.000    0.000    0.000 {method 'upper' of 'str' objects}
        4    0.000    0.000    0.000    0.000 {method 'write' of '_io.StringIO' objects}
        1    0.000    0.000    0.000    0.000 {zmq.backend.cython._poll.zmq_poll}


</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Disassemble">Disassemble<a class="anchor-link" href=".#Disassemble">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">dis</span>

<span class="n">dis</span><span class="o">.</span><span class="n">dis</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>  3           0 LOAD_GLOBAL              0 (sqrt) 
              3 LOAD_FAST                0 (x) 
              6 LOAD_CONST               1 (2) 
              9 BINARY_POWER         
             10 LOAD_FAST                1 (y) 
             13 LOAD_CONST               1 (2) 
             16 BINARY_POWER         
             17 BINARY_ADD           
             18 CALL_FUNCTION            1 (1 positional, 0 keyword pair) 
             21 RETURN_VALUE         
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Memory-allocation">Memory allocation<a class="anchor-link" href=".#Memory-allocation">¶</a>
</h3>
<p>A variable and its name have the same address in RAM.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>507103136
</pre>
</div>
</div>

<div class="output_area">
<div class="prompt output_prompt">Out[11]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>507103136</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="mi">507098816</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">507098848</span>
<span class="nb">id</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">507098848</span>  <span class="c"># 3 and the a+1=2 have the same address</span>

<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">507098816</span>  <span class="c"># b has value 2, so it has the same address as a</span>

<span class="c">### http://www.programiz.com/python-programming/namespace</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This dynamic nature of name binding makes Python powerful.</p>

</div>
</div>
</div>
    </div>
  </div>

        </div>
                <ul class="pager hidden-print">
<li class="previous">
                <a href="../norvig-on-programs-design/" rel="prev" title="Norvig On Programs Design">Previous post</a>
            </li>
            <li class="next">
                <a href="../networking-basics/" rel="next" title="Networking Basics">Next post</a>
            </li>
        </ul>
</div>
            
        </div>
    </section><script src="../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
